<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JS Playground</title>

<style>
:root {
  --bg: #020617;
  --panel: #020617;
  --text: #e5e7eb;
  --editor: #020617;
  --code: #22c55e;
  --accent: #2563eb;

  --font: 17px;
}

body.light {
  --bg: #f8fafc;
  --panel: #ffffff;
  --text: #0f172a;
  --editor: #f1f5f9;
  --code: #0f172a;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  height: 100dvh;
  background: var(--bg);
  font-family: monospace;
  color: var(--text);
}

.app {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: 6px;
  gap: 6px;
}

/* ===== HEADER ===== */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

h1 {
  font-size: 16px;
  color: var(--accent);
}

header button {
  padding: 6px 10px;
  font-size: 14px;
  border-radius: 8px;
  border: none;
  background: var(--accent);
  color: white;
}

/* ===== TABS ===== */
.tabs {
  display: flex;
  gap: 6px;
}

.tab {
  padding: 6px 10px;
  border-radius: 8px;
  background: #334155;
  font-size: 14px;
}

.tab.active {
  background: var(--accent);
}

/* ===== EDITOR ===== */
.editor-wrapper {
  flex: 1;
  display: flex;
  border: 1px solid #334155;
  border-radius: 10px;
  overflow: hidden;
}

.lines {
  padding: 10px 6px;
  text-align: right;
  color: #64748b;
  font-size: var(--font);
  line-height: 1.6;
  user-select: none;
  overflow: hidden;
  align-self: flex-start;
}

.lines div {
  height: calc(1.6em);
}

textarea {
  flex: 1;
  min-height: 0;
  background: var(--editor);
  color: var(--code);
  border: none;
  padding: 10px;
  font-size: var(--font);
  line-height: 1.6;
  resize: none;
  outline: none;
  overflow-y: auto;
}

/* ===== BUTTON BAR ===== */
.buttons {
  display: flex;
  gap: 6px;
}

.buttons button {
  flex: 1;
  padding: 12px;
  font-size: 16px;
  border-radius: 10px;
  border: none;
  background: var(--accent);
  color: white;
}

/* ===== CONSOLE ===== */
.console {
  height: 26dvh;
  background: black;
  border-radius: 10px;
  padding: 8px;
  font-size: calc(var(--font) - 2px);
  overflow-y: auto;
}

.console.hidden {
  display: none;
}

.log { color: var(--text); }
.error { color: #ef4444; }

/* ===== FULLSCREEN ===== */
.fullscreen .editor-wrapper {
  flex: 1;
}

.fullscreen .console,
.fullscreen .tabs,
.fullscreen .buttons {
  display: none;
}
</style>
</head>

<body>
<div class="app" id="app">

<header>
  <h1>JS Playground</h1>
  <button onclick="toggleTheme()">‚òÄÔ∏è / üåô</button>
</header>

<div class="tabs">
  <div class="tab active" onclick="switchFile(0)">main.js</div>
  <div class="tab" onclick="switchFile(1)">test.js</div>
</div>

<div class="editor-wrapper">
  <div id="lines" class="lines"></div>
  <textarea id="editor"></textarea>
</div>

<div class="buttons">
  <button onclick="runCode()">‚ñ∂ Run</button>
  <button onclick="toggleConsole()">üñ• Console</button>
  <button onclick="toggleFullscreen()">‚õ∂ Full</button>
  <button onclick="fontMinus()">A‚àí</button>
  <button onclick="fontPlus()">A+</button>
</div>

<div id="console" class="console"></div>

</div>

<script>
const editor = document.getElementById("editor");
const consoleBox = document.getElementById("console");
const lines = document.getElementById("lines");
const tabs = document.querySelectorAll(".tab");
const app = document.getElementById("app");

let font = 17;

let files = [
  localStorage.getItem("file0") || "let x = 10;\nlet y = 5;\nconsole.log(x + y);",
  localStorage.getItem("file1") || "console.log('Hello from test.js');"
];

let current = 0;

function updateLines() {
  const count = editor.value.split("\n").length;
  lines.innerHTML = "";
  for (let i = 1; i <= count; i++) {
    const d = document.createElement("div");
    d.textContent = i;
    lines.appendChild(d);
  }
  lines.style.height =
    Math.min(editor.scrollHeight, editor.clientHeight) + "px";
}

function switchFile(i) {
  files[current] = editor.value;
  localStorage.setItem("file" + current, files[current]);
  current = i;
  editor.value = files[i];
  tabs.forEach(t => t.classList.remove("active"));
  tabs[i].classList.add("active");
  updateLines();
}

editor.value = files[0];
updateLines();

editor.addEventListener("input", () => {
  updateLines();
  localStorage.setItem("file" + current, editor.value);
});

editor.addEventListener("scroll", () => {
  lines.scrollTop = editor.scrollTop;
});

console.log = (...args) => {
  consoleBox.innerHTML += `<div class="log">&gt; ${args.join(" ")}</div>`;
};

function runCode() {
  consoleBox.innerHTML = "";
  try {
    const result = eval(editor.value);
    if (result !== undefined) {
      consoleBox.innerHTML += `<div class="log">&gt; ${result}</div>`;
    }
  } catch (e) {
    consoleBox.innerHTML += `<div class="error">${e.message}</div>`;
  }
}

function toggleTheme() {
  document.body.classList.toggle("light");
}

function toggleConsole() {
  consoleBox.classList.toggle("hidden");
}

function toggleFullscreen() {
  app.classList.toggle("fullscreen");
}

function fontPlus() {
  font += 1;
  document.documentElement.style.setProperty("--font", font + "px");
}

function fontMinus() {
  font = Math.max(12, font - 1);
  document.documentElement.style.setProperty("--font", font + "px");
}
</script>
</body>
</html>
