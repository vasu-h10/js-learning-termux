<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>JS Playground v25 ‚Äî Debug Practice</title>

<style>
:root {
  --bg:#020617;
  --panel:#0f172a;
  --text:#e5e7eb;
  --accent:#2563eb;
  --console-bg:#000;
}
body {
  margin:0;background:var(--bg);color:var(--text);
  font-family:monospace;display:flex;justify-content:center;
  padding:10px;min-height:100vh;
}
.app {width:100%;max-width:900px;background:var(--panel);
  padding:12px;border-radius:12px;}
h2{margin:0 0 10px;color:var(--accent);font-size:20px;text-align:center}

/* editor box */
#editor {
  width:100%;height:300px;background:#000;color:#22c55e;
  padding:12px;border-radius:10px;resize:none;font-size:16px;
  line-height:1.6;outline:none;border:none;
}

/* buttons */
.buttons {display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
button {
  flex:1;padding:12px;font-size:16px;border:none;
  border-radius:8px;background:var(--accent);color:white;
  cursor:pointer;
}

/* console */
#console {
  background:var(--console-bg);margin-top:12px;padding:12px;
  height:220px;border-radius:10px;overflow-y:auto;
  font-size:15px;white-space:pre-wrap;
}
.log{color:#22c55e}
.error{color:#ef4444;font-weight:bold}
</style>
</head>

<body>
<div class="app">
  <h2>JS Playground v25 ‚Äî Debugging Mode</h2>

  <textarea id="editor" spellcheck="false">
// Try errors:
// consol.log("test")
// let x = ; 
let a = 5
let b = 7
console.log("Result:", a + b)
  </textarea>

  <div class="buttons">
    <button onclick="runJS()">‚ñ∂ Run</button>
    <button onclick="clearConsole()">üßπ Clear</button>
    <button onclick="copyCode()">üìã Copy</button>
    <button onclick="downloadFile()">‚¨á Save</button>
  </div>

  <div id="console"></div>
</div>

<script>
const editor = document.getElementById("editor");
const consoleBox = document.getElementById("console");

/* clear output */
function clearConsole(){ consoleBox.innerHTML=""; }

/* copy */
function copyCode(){
  navigator.clipboard.writeText(editor.value);
  alert("Copied!");
}

/* download */
function downloadFile(){
  const blob=new Blob([editor.value],{type:"text/javascript"});
  const link=document.createElement("a");
  link.href=URL.createObjectURL(blob);
  link.download="script.js";
  link.click();
}

/* run + detect errors with line */
function runJS(){
  clearConsole();
  const code = editor.value;

  /* get lines for better error info */
  const lines = code.split("\n");

  try {
    let output = eval(code);
    if(output!==undefined){
      consoleBox.innerHTML += `<div class="log">${output}</div>`;
    }
  } catch (err) {
    let msg = err.message;
    let type = err.name;

    /* find line number if available */
    let match = msg.match(/<anonymous>:(\d+):/);
    let line = match ? parseInt(match[1]) : null;

    consoleBox.innerHTML += `<div class="error">
      ‚ùå <b>${type}</b>: ${msg}
      ${line?`<br>‚û° Line: ${line}<br><br><code>${lines[line-1]}</code>`:""}
    </div>`;
  }
}

/* Ctrl + Enter to run */
document.addEventListener("keydown",e=>{
  if((e.ctrlKey||e.metaKey)&&e.key==="Enter") runJS();
});
</script>
</body>
</html>
