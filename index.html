<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JS Playground v22 â€” Debugger Practice</title>

<style>
:root{
  --bg:#020617;--panel:#020617;--text:#e5e7eb;
  --editor:#111827;--line:#64748b;--accent:#2563eb;
  --good:#10b981;--error:#ef4444;
}
body.light{
  --bg:#f8fafc;--panel:#ffffff;--text:#0f172a;
  --editor:#e2e8f0;--line:#94a3b8;
}
body{
  margin:0;background:var(--bg);color:var(--text);
  font-family:monospace;display:flex;justify-content:center;
  padding:12px;min-height:100vh;
}
.app{
  width:100%;max-width:900px;background:var(--panel);
  border-radius:12px;padding:14px;
}
h1{margin:0 0 10px;color:var(--accent)}

/* tabs */
.tabs{display:flex;gap:6px;margin-bottom:6px}
.tab{
  padding:6px 10px;background:#334155;color:white;
  border-radius:6px;cursor:pointer;font-size:14px;
}
.tab.active{background:var(--accent)}

/* editor */
.editor-wrap{
  display:flex;border:1px solid #334155;border-radius:8px;
  overflow:hidden;
}
#linebox{
  padding:10px 6px;background:var(--editor);color:var(--line);
  user-select:none;font-size:14px;line-height:1.5;text-align:right;
}
#editor{
  flex:1;padding:10px;background:var(--editor);color:var(--good);
  border:none;resize:none;outline:none;font-size:15px;
  line-height:1.5;min-height:300px;
}

/* buttons */
.buttons{display:flex;gap:8px;margin:10px 0}
button{
  flex:1;padding:12px;border:none;border-radius:8px;
  background:var(--accent);color:white;font-size:15px;
  cursor:pointer;
}

/* console */
#console{
  background:#000;border-radius:8px;padding:10px;
  font-size:14px;height:220px;overflow:auto;white-space:pre-wrap;
}
.log{color:var(--text)}
.error{color:var(--error);font-weight:bold}

/* full console */
#fullConsole{
  display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;
  background:#000;color:white;padding:12px;overflow:auto;z-index:9999;
}
</style>
</head>
<body>

<div class="app">
  <h1>JS Playground v22 â€” Debugging Practice</h1>

  <!-- tabs -->
  <div class="tabs">
    <div class="tab active" onclick="switchFile(0)">main.js</div>
    <div class="tab" onclick="switchFile(1)">test.js</div>
  </div>

  <!-- editor -->
  <div class="editor-wrap">
    <div id="linebox">1</div>
    <textarea id="editor"></textarea>
  </div>

  <!-- buttons -->
  <div class="buttons">
    <button onclick="toggleTheme()">ðŸŒ“ Theme</button>
    <button onclick="runJS()">â–¶ Run</button>
    <button onclick="clearConsole()">ðŸ§¹ Clear</button>
    <button onclick="showFullConsole()">ðŸ–¥ Console</button>
    <button onclick="downloadFile()">â¬‡ Download</button>
  </div>

  <!-- console -->
  <div id="console"></div>
</div>

<!-- full console -->
<div id="fullConsole">
  <button onclick="hideFullConsole()" style="width:100%;padding:8px;">ðŸ”™ Back</button>
  <pre id="fullConsoleOut"></pre>
</div>

<script>
/* ===== STORAGE ===== */
let files=[
  localStorage.getItem("file0")||"let x=10;\nlet y=5;\nconsole.log(x+y)\n",
  localStorage.getItem("file1")||"console.log('test.js loaded')\n"
];
let current=0;

/* ===== ELEMENTS ===== */
const ed=document.getElementById("editor");
const linebox=document.getElementById("linebox");
const con=document.getElementById("console");

/* ===== UPDATE LINES ===== */
function updateLines(){
  let c=ed.value.split("\n").length;
  linebox.innerHTML=[...Array(c).keys()].map(i=>i+1).join("\n");
}

/* ===== SWITCH FILE ===== */
function switchFile(i){
  files[current]=ed.value;
  localStorage.setItem("file"+current,ed.value);
  current=i;
  ed.value=files[i];
  updateLines();
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.querySelectorAll(".tab")[i].classList.add("active");
}

/* ===== START EDITOR ===== */
ed.value=files[0];
updateLines();
ed.addEventListener("input",()=>{updateLines();localStorage.setItem("file"+current,ed.value);});

/* ===== LOGGING ===== */
function log(m){con.innerHTML+=`<div class="log">${m}</div>`}
function err(m){con.innerHTML+=`<div class="error">${m}</div>`}
function clearConsole(){con.innerHTML=""}

/* ===== RUN JS WITH ERROR TYPE ===== */
function runJS(){
  clearConsole();
  let code=ed.value;
  try{
    let result=eval(code);
    if(result!==undefined) log("> "+result);
  }catch(e){
    err(`${e.name}: ${e.message}`);
  }
}

/* ===== FULL CONSOLE ===== */
function showFullConsole(){
  document.getElementById("fullConsoleOut").innerText=con.innerText;
  document.getElementById("fullConsole").style.display="block";
}
function hideFullConsole(){
  document.getElementById("fullConsole").style.display="none";
}

/* ===== DOWNLOAD ===== */
function downloadFile(){
  let blob=new Blob([ed.value],{type:"text/javascript"});
  let a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download=document.querySelectorAll(".tab")[current].innerText;
  a.click();
}

/* ===== THEME ===== */
let theme=localStorage.getItem("theme_v22")||"dark";
if(theme==="light")document.body.classList.add("light");

function toggleTheme(){
  let light=document.body.classList.toggle("light");
  localStorage.setItem("theme_v22",light?"light":"dark");
}

/* ===== RUN WITH CTRL+ENTER ===== */
document.addEventListener("keydown",e=>{
  if((e.ctrlKey||e.metaKey)&&e.key==="Enter")runJS();
});
</script>
</body>
</html>
